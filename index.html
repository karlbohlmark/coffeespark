<!DOCTYPE html>
<html>
<head>
    <script>
                
        Object.keys = Object.keys || function(obj){
            var arr = [];
            for(var prop in obj){
                if(obj.hasOwnProperty(prop)){
                    arr.push(prop)
                }
            }
            return arr;
        }
 
        window.onload = function() {
            var template = document.getElementById('template').innerHTML;
            var parser = new Spark.Parser(new Lexer(template))
            var dom = parser.parse();
            var compiler = new Spark.Compiler(dom)
            var renderer = compiler.compile(dom)
            
            
            var products = []
            for(var i =0;i<7;i++){
                products.push('product ' + i)
            }
            
            var res = renderer.render({products: products})

            document.getElementsByTagName('body')[0].innerHTML = res
        }
    </script>
    <script src="spark.js"></script>
    
    
    <script id="template" type="text/spark">
        <ul>
            <li each="product in products">${product}</li>
        </ul>
    </script>
</head>
<body>
</body>
</html>
